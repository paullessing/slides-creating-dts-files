<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Anything to Declare?</title>
  <link rel="stylesheet" href="node_modules/reveal.js/css/reveal.css">
  <link rel="stylesheet" href="node_modules/reveal.js/lib/css/zenburn.css">
  <link rel="stylesheet" href="assets/theme.css">
</head>
<body>
<div class="reveal">
  <div class="slides">

    <section class="center">
      <div class="content content--center">
        <h1>Anything to Declare?</h1>
        <h2 style="text-align: center">Understanding Typescript Definition Files</h2>
      </div>
    </section>

    <!--<section hidden>-->
      <!--<h2>About Me</h2>-->
      <!--<ul class="content">-->
        <!--<li>Paul Lessing</li>-->
        <!--<li>City Pantry</li>-->
        <!--<li>Angular, Node, Java, PHP</li>-->
      <!--</ul>-->
    <!--</section>-->

    <section>
      <h2>What are <code>.d.ts</code> files?</h2>
      <ul class="content">
        <li>TypeScript <em>definition</em> files
          <ul>
            <li>C header files (<code>.h</code>)</li>
          </ul>
        </li>
        <li>Interface with JavaScript files</li>
        <li>Type Checking</li>
      </ul>
    </section>

    <section>
      <h2>Why do I care?</h2>
      <ul class="content">
        <li>Legacy code</li>
        <li>Migration</li>
        <li>Third-party Libraries</li>
        <li>Intellisense</li>
        <li>Publishing on npm</li>
        <li class="fragment">Applications for regular <code>.ts</code></li>
      </ul>

      <aside class="notes">
        Never publish <em>final code</em> as Typescript on npm - other people will not be able to compile it.
      </aside>
    </section>

    <section>
      <h2>Getting Started</h2>
      <p style="font-size: 1em; margin-bottom: 0.2em">Web Push Notifications: Timely, Relevant, and Precise</p>
      <a style="font-size: 0.8em;" href="https://developers.google.com/web/fundamentals/push-notifications/">https://developers.google.com/web/fundamentals/push-notifications/</a>
      <div class="fragment">
        <img src="assets/getting-started-web-push-npm.png" width="80%" style="vertical-align: top">
      </div>
    </section>

    <section>
      <h2>Package Overview</h2>
      <div class="content">
        <pre class="lang-js"><code style="max-height:initial">const webpush = require('web-push');

// Generate some keys
webpush
  .generateVAPIDKeys();

// Encrypt a payload
webpush
  .encrypt(userPublicKey, userAuth, payload, contentEncoding);

// Set config
webpush
  .setGCMAPIKey(apiKey);

// Generate headers
webpush
  .getVapidHeaders(audience, subject, publicKey, privateKey, contentEncoding, expiration);

// Generate Metadata
webpush
  .generateRequestDetails(pushSubscription, payload, options);

// Send a notification
webpush
  .sendNotification(pushSubscription, payload, options);

// Constants
webpush.supportedContentEncodings.AES_GCM
webpush.supportedContentEncodings.AES_128_GCM</code></pre>
      </div>
    </section>

    <section>
      <h2>Step 0: Auto-Generate</h2>
      <div>
        <img src="assets/snippets/printer.ts.png" width="80%" style="vertical-align: top">
      </div>
    </section>
    <section>
      <h2>Step 0: Auto-Generated Code</h2>
      <ul class="content">
        <li><code>tsc -d &lt;file&gt;.ts</code></li>
      </ul>
      <img src="assets/snippets/printer.d.ts.short.png" width="80%" style="vertical-align: top">
      <ul class="content fragment">
        <li>Have to have TypeScript files</li>
        <li>Rough outline only</li>
        <li>Good starting point</li>
      </ul>
    </section>

    <section>
      <h2>Step 1: Read the Docs</h2>
      <div>
        <img src="assets/getting-started-github-docs.png" width="80%" style="vertical-align: top">
      </div>
    </section>

    <section>
      <h2>Step 2: Create a <code>.d.ts</code> file</h2>
      <ul class="content fragment">
        <li>What <i>is</i> a <code>.d.ts</code> file?</li>
      </ul>
    </section>

    <section>
      <h2>Differences between <code>.ts</code> and <code>.d.ts</code></h2>
      <div>
        <h3 class="fragment">.ts</h3>
        <ul class="content fragment">
          <li>Explicity imported</li>
          <li>Contains code and/or declarations</li>
        </ul>
      </div>
      <div>
        <h3 class="fragment">.d.ts</h3>
        <ul class="content fragment">
          <li>Automatically imported ("Ambient")</li>
          <li>Imported <em>by name</em></li>
          <li><code>index.d.ts</code> in package.json</li>
          <li>Must <code>export</code> everything at top level</li><!-- https://basarat.gitbooks.io/typescript/docs/types/ambient/d.ts.html -->
          <li>Still a <code>.ts</code> file - all the same rules apply</li>
          <li class="fragment">Use when dealing with external code</li>
        </ul>
      </div>
    </section>

    <section>
      <h2>The <code>declare</code> keyword</h2>
      <blockquote style="transform: translateX(-50px)">
        The TypeScript <b>declare</b> keyword is used to declare variables that may not have originated from a TypeScript file.
      </blockquote>
      <ul>
        <li>All variables <em>inside</em> <code>.ts</code> files are either exported or invisible</li>
        <li><code>declare</code> indicates global scope</li>
      </ul>
    </section>

    <section>
      <h2>Example <code>declare</code>: Google Analytics</h2>
      <div>
        <code>ga.js</code>
        <pre class="lang-js"><code>window.ga = ga || [];</code></pre>
      </div>
      <div class="fragment">
        <code>analytics.ts</code>
        <pre class="lang-ts"><code>ga.push('pageview');      // error TS2304: Cannot find name 'ga'.</code></pre>
      </div>
      <div class="fragment">
        <pre class="lang-ts"><code>declare const ga: string[];
ga.push('pageview');      // OK
</code></pre>
      </div>
    </section>

    <section>
      <h2>Step 3: Start with the easy ones</h2>
      <img src="assets/generate-vapid-keys-github.png" />
      <div class="fragment">
        <pre class="lang-ts"><code>export interface VapidKeys {
  publicKey: string;
  privateKey: string;
}

export function generateVAPIDKeys(): VapidKeys;</code></pre>
      </div>
    </section>

    <section>
      <h2>Step 3: Start with the easy ones</h2>
      <img src="assets/set-gcm-github.png" />
      <div class="fragment">
        <pre class="lang-ts"><code>export function setGCMAPIKey(apiKey: string): void</code></pre>
      </div>
    </section>

    <section>
      <h2>Important: Read the Source</h2>
      <img src="assets/gcm-key-source-highlight.png" />
      <div class="fragment">
        <pre class="lang-ts"><code>export function setGCMAPIKey(apiKey: string | null): void</code></pre>
      </div>
    </section>

    <section>
      <h2>Let's get more interesting</h2>
      <img src="assets/encrypt.png" />
      <div class="fragment">
        <pre class="lang-ts"><code>export function encrypt(
  userPublicKey: string,
  userAuth: string,
  payload: string,
  contentEncoding: string
): Promise&lt;?&gt;</code></pre>
      </div>
    </section>

    <section>
      <h2><i>Always</i> check the source</h2>
      <img src="assets/encrypt-source.png" />
      <div class="fragment">
        <pre class="lang-ts"><code>export function encrypt(
  userPublicKey: string,
  userAuth: string,
  payload: string | Buffer,
  contentEncoding: string
): EncryptionResult</code></pre>
      </div>
      <div class="fragment">
        <pre class="lang-ts"><code>export interface EncryptionResult {
    localPublicKey: string;
    salt: string;
    cipherText: Buffer;
}</code></pre></div>
    </section>

    <section>
      <h2>Declaring Constants</h2>
      <img src="assets/webpush-constants.png" />
      <ul>
        <li>How to declare this?</li>
      </ul>
      <div class="fragment">
        <pre class="lang-ts"><code>export type ContentEncoding = 'aesgcm' | 'aes128gcm';</code></pre>
      </div>
      <div class="fragment">
        <pre class="lang-ts"><code>export const supportedContentEncodings: {
  readonly AES_GCM:     'aesgcm'    & ContentEncoding;
  readonly AES_128_GCM: 'aws128gcm' & ContentEncoding;
};</code></pre></div>
      <ul class="fragment">
        <li>Note: Not actually a <code>const</code>!</li>
      </ul>
    </section>

    <section class="center">
      <div class="content content--center">
        <h1><span style="font-size: 0.8em">Types vs Values</span></h1>
      </div>
    </section>

    <section>
      <h2>Types vs Values</h2>
      <h3 class="fragment">Types</h3>
      <ul class="content fragment">
        <li>Typescript only</li>
        <li>Compiled Out</li>
      </ul>

      <h3 class="fragment">Values</h3>
      <ul class="content fragment">
        <li>Compiled to JavaScript</li>
        <li>Can be assigned in JS</li>
      </ul>
    </section>

    <section>
      <h2>Examples</h2>
      <h3 class="fragment">Types</h3>
      <ul class="content fragment">
        <li><code><b>type</b> T = number | string</code></li>
        <li><code><b>interface</b> I {}</code></li>
        <li><code>import { <b>T</b>, <b>I</b> } from 'm'</code></li>
      </ul>

      <h3 class="fragment">Values</h3>
      <ul class="content fragment">
        <li><code><b>const</b> foo = 'bar' // let, var</code></li>
        <li><code><b>function</b> hello()</code></li>
        <li><code><b>namespace</b> n { const x }</code></li>
        <li><code><b>module</b> m { const x }</code></li>
        <li><code>import { <b>v</b> } from 'm' </code></li>
      </ul>

      <aside class="notes">
        Types: Things that are <em>interfaces</em>, compiled out by TypeScript<br/>
        Values: Things that stay behind when you compile<br>
        Right hand side of assignment vs left hand side of assignment
      </aside>
    </section>

    <section>
      <h2>Examples</h2>
      <pre class="lang-ts fragment"><code>Type -------v</code></pre>
      <pre class="lang-ts         "><code>  const me: User = { name: 'Paul Lessing' };</code></pre>
      <pre class="lang-ts fragment"><code>Value --^----------^</code></pre>

      <div class="fragment" style="margin-top: 2em">
        <pre class="lang-ts fragment"><code>Type ----------------v-------------v------------v</code></pre>
        <pre class="lang-ts         "><code>function hash(value: Buffer, salt: string): md5.HashResult {}</code></pre>
        <pre class="lang-ts fragment"><code>Value ---^----^--------------^--------------?</code></pre>
      </div>
    </section>

    <section>
      <h2>Namespaces</h2>
      <ul class="content">
        <li>Groups of types and/or values</li>
        <li>Like <i>objects</i> containing entries</li>
      </ul>
      <pre class="lang-ts fragment"><code>// File: moment.ts
namespace moment {
  interface Duration {
    seconds: number;
  }
  class Moment {
    static const version = '1.0';
  }
  const HOURS_PER_DAY = 24;
}
</code></pre>
      <ul class="content">
        <li class="fragment"><code>const twoDays: moment.Duration = ... // Type</code></li>
        <li class="fragment"><code>const now: moment.Moment = ... // Type</code></li>
        <li class="fragment"><code>const hours = moment.HOURS_PER_DAY // Value</code></li>
        <li class="fragment"><code>const version = moment.Moment.version // Value</code></li>
      </ul>
    </section>

    <section>
      <h2>Can something be Value <em>and</em> Type?</h2>
      <ul class="content">
        <li class="fragment">
          Class
          <pre class="lang-ts"><code>const p: Promise;
p = new Promise();</code></pre>
          <ul class="fragment">
            <li>Interface</li>
            <li>Constructor function</li>
          </ul>
        </li>
        <li class="fragment">
          Enum
          <pre class="lang-ts"><code>const bestDay: DaysOfWeek;
bestDay = DaysOfWeek.SATURDAY;</code></pre>
          <ul class="fragment">
            <li>Type</li>
            <li>Enum object</li>
          </ul>
        </li>
      </ul>
    </section>

    <section>
      <h2>Back to our code</h2>
      <div class="fragment">
        <pre class="lang-ts"><code>export function encrypt(
  userPublicKey: string,
  userAuth: string,
  payload: string | Buffer,
  contentEncoding: ContentEncoding
): EncryptionResult;

export type ContentEncoding = 'aesgcm' | 'aes128gcm';

export const supportedContentEncodings: {
  readonly AES_GCM:     'aesgcm'    & ContentEncoding;
  readonly AES_128_GCM: 'aws128gcm' & ContentEncoding;
};</code></pre></div>
      <ul class="fragment content">
        <li>Better type safety for <code>contentEncoding</code></li>
        <li>Exported declaration for <code>supportedContentEncodings</code></li>
      </ul>
    </section>

    <section>
      <h2>Complex Behaviours</h2>
      <img src="assets/generate-request-details-code-github.png" />
    </section>

    <section>
      <h2>Complex Behaviours</h2>
      <pre class="lang-ts"><code>export interface PushSubscription {
  ...
}

export interface RequestOptions {
  ...
}

export interface RequestDetails {
  method: 'POST';
  headers: Headers;
  body: Buffer | null;
  endpoint: string;
  proxy?: string;
}


export function generateRequestDetails(
  subscription: PushSubscription,
  payload?: string | Buffer,
  options?: RequestOptions
): RequestDetails;</code></pre>
    </section>

    <section>
      <h2>Complex Behaviours</h2>
      <img src="assets/generate-docs-github.png" />
      <ul>
        <li>How to model this behaviour?</li>
        <li>Want to be as helpful (specific) as possible</li>
        <li>Compile-time error handling</li>
      </ul>
    </section>

    <section>
      <h2>Overloading</h2>
      <ul class="content">
        <li>One base method declaration</li>
        <li>Multiple additional declarations without bodies</li>
        <li>Compiler infers which one applies</li>
      </ul>
      <pre class="lang-ts fragment"><code>function safeUppercase(value: string): string;
function safeUppercase(value: null): null;</code></pre>
      <pre class="lang-ts"><code>function safeUppercase(value: string | null): string | null {
  if (typeof value === 'string') {
    return value.toUppercase();
  } else {
    return null;
  }
}</code></pre>
      <pre class="lang-ts fragment"><code>const x: string = safeToUppercase('hello'); // OK
const y: string = safeToUppercase(null); // Type 'null' is not assignable to type 'string'</code></pre>
    </section>

    <!-- TODO introduce overloading concepts -->
    <section>
      <h2>Overloading <code>generateRequestDetails</code></h2>
      <pre class="lang-ts fragment"><code>export function generateRequestDetails(subscription: PushSubscription,
  payload?: null,
  options?: RequestOptions
): RequestDetails & { body: null };</code></pre>
      <pre class="lang-ts fragment"><code>export function generateRequestDetails(subscription: PushSubscription,
  payload?: string | Buffer,
  options?: RequestOptions
): RequestDetails & { body: Buffer };</code></pre>
      <pre class="lang-ts"><code>export function generateRequestDetails(subscription: PushSubscription,
  payload?: string | Buffer,
  options?: RequestOptions
): RequestDetails;

export interface RequestDetails {
  method: 'POST';
  headers: Headers;
  body: Buffer | null;
  endpoint: string;
  proxy?: string;
}</code></pre>
    </section>

    <section>
      <h2>Advanced Types</h2>
      <ul class="content">
        <li>Remember: <code>'some-string'</code> is a type</li>
        <li>Overloading based on specific inputs</li>
        <li>Example: Event handling</li>
      </ul>
      <div class="fragment">

        <div class="fragment">
          <pre class="lang-ts"><code>function on(eventName: 'click', handler: (event: MouseEvent) => void);</code></pre>
          <pre class="lang-ts"><code>function on(eventName: 'change', handler: (event: InputEvent) => void);</code></pre>
        </div>
        <pre class="lang-ts"><code>function on(eventName: string, handler: (event: Event) => void);</code></pre>
      </div>
    </section>
    <section>
      <h2>Advanced Types: <code>getVapidHeaders</code></h2>
      <pre class="lang-ts"><code>export function getVapidHeaders(
  audience: string, subject: string, publicKey: string, privateKey: string,
  contentEncoding: 'aes128gcm', expiration?: number
): {
    Authorization: string;
};
export function getVapidHeaders(
  audience: string, subject: string, publicKey: string, privateKey: string,
  contentEncoding: 'aesgcm', expiration?: number
): {
    Authorization: string;
    'Crypto-Key': string;
};

export function getVapidHeaders(
  audience: string, subject: string, publicKey: string, privateKey: string,
  contentEncoding: ContentEncoding, expiration?: number
): {
    Authorization: string;
    'Crypto-Key'?: string;
};</code></pre>
    </section>

    <!-- TODO: Testing, publishing. Modules? -->

    <!----------------------------------------------------
                             FIN
      ---------------------------------------------------->
    <section class="center">
      <div class="content content--center">
        <h1><span>FIN</span></h1>
      </div>
    </section>


    <!--<section>-->
      <!--<section>-->
        <!--<h2>Module vs Namespace</h2>-->
        <!--<h3><code>namespace</code></h3>-->
        <!--<ul>-->
          <!--<li>JavaScript Object</li>-->
          <!--<li>Can export selectively from inside <code>namespace</code></li>-->
        <!--</ul>-->
        <!--<h3><code>module</code></h3>-->
        <!--<ul>-->
          <!--<li>Old name: "External Modules"</li>-->
          <!--<li>Only <code>declare</code>d in <code>.d.ts</code> files</li>-->
          <!--<li>1 <code>.ts</code> file = 1 <code>module</code></li>-->
        <!--</ul>-->
      <!--</section>-->
      <!--<section>-->
        <!--<div class="content content&#45;&#45;center">-->
          <!--<h2>Compiled output</h2>-->
          <!--<img src="assets/snippets/namespace-module.png">-->
        <!--</div>-->
      <!--</section>-->
    <!--</section>-->

    <!--<section>-->
      <!--<h2>Example: What does <em>this</em> mean?</h2>-->
      <!--<img src="assets/snippets/refers-only-to-a-type.png" width="60%" style="vertical-align: top">-->
      <!--<ul>-->
        <!--<li class="fragment">-->
          <!--We think <code>Promise</code> is a <em>class</em> (value), but the compiler only has an <em>interface</em> (type)-->
        <!--</li>-->
        <!--<li class="fragment">-->
          <!--In this case: Ambient import vs. explicit import-->
        <!--</li>-->
        <!--<li class="fragment">-->
          <!--We forgot to declare the right library in our <code>tsconfig.json</code>!-->
        <!--</li>-->
      <!--</ul>-->
    <!--</section>-->

    <!--<section>-->
      <!--<section>-->
        <!--<h2>Merging</h2>-->
        <!--<ul class="content">-->
          <!--<li>Overloading</li>-->
          <!--<li>Multiple definitions as if they were one-->
            <!--<pre><code class="lang-typescript">interface Foo { a: string; }-->
<!--interface Foo { b: number; }-->

<!--// Result-->
<!--interface Foo {-->
  <!--a: string;-->
  <!--b: number;-->
<!--}</code></pre>-->
          <!--</li>-->
          <!--<li class="fragment">Allows representing real-life JS library behaviour-->
            <!--<pre><code class="lang-typescript">const now: moment.Moment = moment();-->

<!--// Example declaration-->
<!--namespace moment {-->
  <!--interface Moment {}-->
<!--}-->
<!--function moment(): moment.Moment;</code></pre>-->
          <!--</li>-->
          <!--<li class="fragment">-->
            <!--Can merge anything that doesn't cause a conflict-->
          <!--</li>-->
        <!--</ul>-->
      <!--</section>-->

      <!--<section>-->
        <!--<h2>Merge Rules: Conflicts</h2>-->
        <!--<ul class="content">-->
          <!--<li>-->
            <!--Different types for the same name-->
            <!--<pre class="full"><code class="small lang-typescript">interface Foo { a: string; }-->
<!--interface Foo { a: number; }-->

<!--// Result-->
<!--error TS2727: Subsequent property declarations must have the same type.-->
  <!--Property 'a' must be of type 'string', but here has type 'number'.</code></pre>-->
          <!--</li>-->
        <!--</ul>-->
      <!--</section>-->

      <!--<section>-->
        <!--<h2>Merge Rules: Conflicts</h2>-->
        <!--<ul class="content">-->
          <!--<li>-->
            <!--Type aliases-->
            <!--<pre class="full"><code class="small lang-typescript">type Direction = 'left';-->
<!--type Direction = 'right';-->

<!--// Result-->
<!--error TS2300: Duplicate identifier 'Direction'.</code></pre>-->
          <!--</li>-->
        <!--</ul>-->
      <!--</section>-->

      <!--<section>-->
        <!--<h2>Merge Rules: Conflicts</h2>-->
        <!--<ul class="content">-->
          <!--<li>-->
            <!--Values-->
            <!--<pre><code class="small lang-typescript">let Direction = 'left';-->
<!--function Direction(): string;-->

<!--// Result-->
<!--error TS2300: Duplicate identifier 'Direction'.</code></pre>-->
          <!--</li>-->
          <!--<li class="fragment">-->
            <!--Exception: namespaces-->
            <!--<pre class="fragment"><code class="small lang-typescript">function time(): Date;-->
<!--namespace time {-->
  <!--const startOfTime: number = 0;-->
  <!--now(): Date;-->
<!--}</code></pre>-->
          <!--</li>-->
          <!--<li class="fragment">-->
            <!--Namespaces never conflict-->
          <!--</li>-->
        <!--</ul>-->
      <!--</section>-->
    <!--</section>-->

    <!--<section>-->
      <!--<h2>Merge Rules: Namespaces</h2>-->
      <!--<ul class="content">-->
        <!--<li>-->
          <!--Namespaces never conflict-->
          <!--<ul>-->
            <!--<li class="fragment">-->
              <!--...but the things inside them might (if they're exported)-->
            <!--<pre class="fragment"><code class="lang-typescript">export namespace n {-->
  <!--export interface F {-->
    <!--a: string;-->
  <!--}-->
<!--}-->
<!--export namespace n {-->
  <!--export interface F {-->
    <!--a: number;-->
  <!--}-->
<!--}-->

<!--// Result-->
<!--Subsequent property declarations must have the same type.-->
  <!--Property 'a' must be of type 'string', but here has type 'number'.</code></pre>-->
            <!--</li>-->
          <!--</ul>-->
      <!--</ul>-->
    <!--</section>-->

    <!--<section>-->
      <!--<h2>Merge Rules: Exporting</h2>-->
      <!--<ul>-->
        <!--<li>-->
          <!--All exported types and values are visible-->
        <!--</li>-->
        <!--<li>-->
          <!--Exporting works from inside namespaces-->
        <!--</li>-->
        <!--<li>-->
          <!--Non-exported values inside namespaces are "private"-->
        <!--</li>-->
      <!--</ul>-->
      <!--<pre class="fragment lang-ts"><code>export namespace zoo {-->
  <!--export interface Mammal { legs: number; }-->
  <!--interface Dinosaur {}-->
<!--}-->
<!--export namespace zoo {-->
  <!--export interface Mammal { furType: string; }-->
  <!--export class Rabbit implements Mammal {-->
    <!--legs: number;-->
    <!--furType: string;-->
    <!--friend: Dinosaur; // Error-->
  <!--}-->
  <!--export const bunny = new Rabbit();-->
<!--}</code></pre>-->
    <!--</section>-->

    <!--<section>-->
      <!--<h2>Example: Jasmine Matchers</h2>-->
      <!--<pre class="lang-ts"><code>const testElement = fixture.debugElement.query(By.css('.test'));-->
<!--expect(testElement).toBePresent();</code></pre>-->

      <!--<pre class="lang-ts fragment"><code>jasmine.addMatchers({-->
  <!--toBePresent: () => ({-->
    <!--compare: (actual: DebugElement | null | void, message?: string) => {-->
      <!--return {-->
        <!--pass: !!actual,-->
        <!--message: `Expected element ${ actual ? 'not ' : ''}to be present` +-->
          <!--(message ? `: ${message}` : '')-->
      <!--};-->
    <!--}-->
  <!--}),-->
<!--};</code></pre>-->

      <!--<pre class="lang-ts fragment"><code>declare namespace jasmine {-->
  <!--export interface Matchers&lt;T&gt; {-->
    <!--/**-->
     <!--* Tests whether a given DebugElement is present in the DOM.-->
     <!--* @param {string} message (optional) message to display on failure.-->
     <!--*/-->
    <!--toBePresent(message?: string): boolean;-->
  <!--}-->
<!--}</code></pre>-->
    <!--</section>-->

    <!--<section>-->
      <!--<section>-->
        <!--<h2>Overloading: HTTP Matcher</h2>-->
        <!--<img src="assets/snippets/overloaded-http-matcher.png" style="border: 0">-->
      <!--</section>-->
      <!--<section>-->
        <!--<h2>Overloading: Intellisense</h2>-->
        <!--<img src="assets/snippets/http-autocomplete.png" style="border: 0">-->
      <!--</section>-->
    <!--</section>-->

    <!--<section>-->
      <!--<section>-->
        <!--<h2>Problem: String IDs</h2>-->
        <!--<pre class="lang-ts"><code>interface Order {-->
  <!--id: string;-->
  <!--...-->
<!--}-->

<!--class OrderService {-->
  <!--getOrder(orderId: string): Order {}-->
<!--}</code></pre>-->
        <!--<ul class="fragment">-->
          <!--<li>How to ensure correct call?</li>-->
          <!--<li><code>string</code> could come from anywhere</li>-->
          <!--<li><code>orderService.getOrder(customerId);</code></li>-->
        <!--</ul>-->
      <!--</section>-->

      <!--<section>-->
        <!--<h2>Pattern: Phantom Types</h2>-->
        <!--<pre class="lang-ts"><code>interface Order {-->
  <!--id: OrderId;-->
  <!--...-->
<!--}-->
<!--interface OrderId extends String {-->
  <!--__order_id_phantom__: never;-->
<!--}-->

<!--class OrderService {-->
  <!--getOrder(orderId: OrderId): Order {-->
    <!--return this.http.get(`http://api.dev/orders/${orderId}`);-->
  <!--}-->
<!--}</code></pre>-->
        <!--<ul>-->
          <!--<li>Cannot assign to <code>never</code></li>-->
          <!--<li><code>OrderId</code> is still a String</li>-->
          <!--<li><b>But</b> no other string is an OrderId</li>-->
        <!--</ul>-->
      <!--</section>-->

      <!--<section>-->
        <!--<h2>Pattern: Phantom Types</h2>-->
        <!--<pre class="lang-ts"><code>const orderId: string = router.queryParams.orderId;-->

<!--orderService.getOrder(orderId); // error</code></pre>-->
        <!--<pre class="lang-ts fragment"><code>function ensureOrderId(id: string): OrderId {-->
  <!--if (!id || !id.match(ORDER_ID_PATTERN)) {-->
    <!--throw new Error(`ID "${id}" does not look like a valid OrderId!`);-->
  <!--}-->
  <!--return id as OrderId;-->
<!--}-->

<!--const orderId: string = ensureOrderId(router.queryParams.orderId);-->
<!--orderService.getOrder(orderId); // OK</code></pre>-->
      <!--</section>-->
    <!--</section>-->

    <!--<section>-->
      <!--<section>-->
        <!--<h2>Example: <code>node-uuid</code></h2>-->
        <!--<p>https://github.com/broofa/node-uuid</p>-->
        <!--<h3>API</h3>-->
        <!--<pre class="lang-plain"><code style="max-height: initial">uuid()-->
  <!--Generates a v4 UUID.-->

<!--uuid.v1([options [, buffer [, offset]]])-->
  <!--Generate and return a RFC4122 v1 (timestamp-based) UUID.-->

<!--uuid.v4([options [, buffer [, offset]]])-->
  <!--Generate and return a RFC4122 v4 UUID.-->

  <!--options - (Object)-->
    <!--random - (Number[16]) Array of 16 numbers (0-255) to use instead of random ones-->
    <!--rng - (Function) Random # generator to use.-->
        <!--Set to one of the built-in generators:-->
          <!-- - uuid.mathRNG (all platforms),-->
          <!-- - uuid.nodeRNG (node.js only),-->
          <!-- - uuid.whatwgRNG (WebKit only),-->
          <!-- - custom function that returns an array[16] of byte values.-->
    <!--buffer - (Array | Buffer) Array or buffer where UUID bytes are to be written.-->

  <!--offset - (Number) Starting index in buffer at which to begin writing.</code></pre>-->
      <!--</section>-->

      <!--<section>-->
        <!--<pre class="lang-ts"><code>function uuid(): string;</code></pre>-->
        <!--<pre class="lang-ts fragment"><code>function uuid(): typeof uuid.v4;-->

<!--namespace uuid {-->
  <!--function v1(): string;-->
  <!--function v4(): string;-->
<!--}</code></pre>-->
      <!--</section>-->

      <!--<section>-->
        <!--<pre class="lang-ts"><code>function uuid(): string;-->
<!--namespace uuid {-->
  <!--// Placeholders until we figure them out-->
  <!--type Rng = any;-->
  <!--type OutputBuffer = any;-->

  <!--interface V4Options {-->
    <!--random?: number[];-->
    <!--rng?: Rng;-->
    <!--buffer?: OutputBuffer;-->
  <!--}-->

  <!--function v1(): string;-->
  <!--function v4(-->
    <!--options?: V4Options,-->
    <!--buffer?: OutputBuffer,-->
    <!--offset?: number-->
  <!--): string | OutputBuffer;-->
<!--}</code></pre>-->
      <!--</section>-->

      <!--<section>-->
        <!--<pre class="lang-ts"><code style="max-height: initial;">/// &lt;reference types="node" /&gt;-->
<!--// Imports all types from @types/node/index.d.ts-->

<!--function uuid(): string;-->
<!--namespace uuid {-->
  <!--type Rng = any;-->
  <!--type OutputBuffer = number[] | Buffer; // Imported from node-->

  <!--interface V4Options {-->
    <!--random?: number[];-->
    <!--rng?: Rng;-->
    <!--buffer?: OutputBuffer;-->
  <!--}-->

  <!--function v1(): string;-->
  <!--function v4(-->
    <!--options?: V4Options,-->
    <!--buffer?: OutputBuffer,-->
    <!--offset?: number-->
  <!--): string | OutputBuffer;-->
<!--}</code></pre>-->
      <!--</section>-->

      <!--<section>-->
        <!--<pre class="lang-ts"><code style="max-height: initial;">/// &lt;reference types="node" /&gt;-->

<!--function uuid(): string;-->
<!--namespace uuid {-->
  <!--type Rng = any;-->
  <!--type OutputBuffer = number[] | Buffer;-->

  <!--interface V4Options {-->
    <!--random?: number[];-->
    <!--rng?: Rng;-->
  <!--}-->
  <!--interface V4WithBufferOptions extends V4Options {-->
    <!--buffer: OutputBuffer;-->
  <!--}-->

  <!--function v1(): string;-->

  <!--function v4(options?: V4Options): string;-->
  <!--function v4(options: V4WithBufferOptions): OutputBuffer;-->
  <!--function v4(options: V4Options, buffer: OutputBuffer, offset?: number): OutputBuffer;-->
<!--}</code></pre>-->
      <!--</section>-->

      <!--<section>-->
        <!--<pre class="lang-ts"><code style="max-height: initial;">/// &lt;reference types="node" /&gt;-->

<!--function uuid(): string;-->
<!--namespace uuid {-->
  <!--type Rng = any;-->
  <!--type OutputBuffer = number[] | Buffer;-->

  <!--interface V4Options {-->
    <!--random?: number[];-->
    <!--rng?: Rng;-->
  <!--}-->
  <!--interface V4WithBufferOptions&lt;T extends OutputBuffer&gt; extends V4Options {-->
    <!--buffer: T;-->
  <!--}-->

  <!--function v1(): string;-->

  <!--function v4(options?: V4Options): string;-->
  <!--function v4&lt;T extends OutputBuffer&gt;(options: V4WithBufferOptions&lt;T&gt;): T;-->
  <!--unction v4&lt;T extends OutputBuffer&gt;(options: V4Options, buffer: T, offset?: number): T;-->
<!--}</code></pre>-->
      <!--</section>-->

      <!--<section>-->
        <!--<pre class="lang-ts"><code style="max-height: initial;">/// &lt;reference types="node" /&gt;-->

<!--const uuid: typeof uuid.v4;-->
<!--namespace uuid {-->
  <!--interface ProvidedRng {-->
    <!--__internal_rng_phantom__: never;-->
  <!--}-->
  <!--const mathRNG: ProvidedRng;-->
  <!--const nodeRNG: ProvidedRng;-->
  <!--const whatwgRNG: ProvidedRng;-->
  <!--interface CustomRng { (): number[] } // Returns number[16];-->

  <!--type Rng = ProvidedRng | CustomRng;-->
  <!--type OutputBuffer = number[] | Buffer;-->

  <!--interface V4Options {-->
    <!--random?: number[];-->
    <!--rng?: Rng;-->
  <!--}-->
  <!--interface V4WithBufferOptions&lt;T extends OutputBuffer&gt; extends V4Options {-->
    <!--buffer: T;-->
  <!--}-->

  <!--function v1(): string;-->

  <!--function v4(options?: V4Options): string;-->
  <!--function v4&lt;T extends OutputBuffer&gt;(options: V4WithBufferOptions&lt;T&gt;): T;-->
  <!--function v4&lt;T extends OutputBuffer&gt;(options: V4Options, buffer: T, offset?: number): T;-->
<!--}-->

<!--export = uuid;</code></pre>-->
      <!--</section>-->

      <!--<section>-->
        <!--<h2>Result</h2>-->
        <!--<img src="assets/snippets/uuid.png">-->
      <!--</section>-->
    <!--</section>-->

    <section>
      <h2>@types / DefinitelyTyped</h2>
      <ul>
        <li>https://github.com/DefinitelyTyped/DefinitelyTyped</li>
        <li><code>yarn add -D @types/&lt;package&gt;</code></li>
      </ul>
    </section>

    <section>
      <h2>Further Reading</h2>
      <ul>
        <li>https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html</li>
        <li>https://www.typescriptlang.org/docs/handbook/declaration-files/deep-dive.html</li>
        <li>https://www.typescriptlang.org/docs/handbook/advanced-types.html</li>
        <li>https://github.com/DefinitelyTyped/DefinitelyTyped#how-can-i-contribute</li>
      </ul>
    </section>

    <!-- https://www.typescriptlang.org/docs/handbook/declaration-files/deep-dive.html-->
  </div>
</div>

<script src="node_modules/reveal.js/lib/js/head.min.js"></script>
<script src="node_modules/reveal.js/js/reveal.js"></script>
<!--<script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>-->
<script src="node_modules/reveal.js/plugin/notes/notes.js"></script>
<script>
  Reveal.initialize({
    progress: true,
    controls: true,
    history: true,
    center: false,
    dependencies: [
      { src: 'node_modules/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
    ]
  });
</script>
<script>
  document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')
</script>
</body>
</html>
